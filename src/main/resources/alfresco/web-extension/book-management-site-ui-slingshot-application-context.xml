<?xml version='1.0' encoding='UTF-8'?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
   
   <!--
    Define beans related to this Share extension here, such as
     evaluators and resource bootstrapping.

     Note. Any configuration related to the whole Share.war webapp
           (i.e. not specific to this share extension) should be
            placed in the alfresco-allinone/share/src/main/resources/alfresco/web-extension/custom-slingshot-application-context.xml file
   -->

   <!-- Add module specific messages and labels -->
   <bean id="org.acme.bestpublishing.book-management-site-ui.resources"
         class="org.springframework.extensions.surf.util.ResourceBundleBootstrapComponent">
      <property name="resourceBundles">
         <list>
            <value>alfresco.web-extension.messages.book-management-site-ui</value>
         </list>
      </property>
   </bean>

   <!-- Evaluator that is true if a book has been published -->
   <bean id="evaluator.doclib.bestpub.bookFolderPublished" parent="evaluator.doclib.action.propertyNotNull">
      <property name="property" value="bookpub:webPublishedDate"/>
   </bean>

   <!-- Check if the metadata has been updated since the last published date -->
   <bean id="evaluator.doclib.indicator.isMetadataUpdated"
         class="org.acme.bestpublishing.evaluators.CheckMetadataUpdates" />

   <!-- Alfresco Repo Action used to create/add chapter folders -->
   <!-- TODO: need to go into Platform JAR book-management-site-actions -->
   <bean id="uk.co.tandf.bopp.actions.createChapterAction"
         class="uk.co.tandf.bopp.actions.CreateChapterAction"
         parent="action-executer">
      <property name="boppUtilsService" ref="uk.co.tandf.bopp.services.boppUtilsService" />
      <property name="workflowUtilsService" ref="uk.co.tandf.bopp.services.workflowUtilsService"/>
      <property name="fileFolderService" ref="FileFolderService"/>
      <property name="nodeService" ref="NodeService"/>
   </bean>
</beans>